<!-- Sidebar Overlay (Mobile) -->
<div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden" onclick="toggleSidebar()"></div>

<!-- Sidebar -->
<div id="sidebar" class="fixed left-0 top-0 h-full w-80 bg-gray-900 text-white z-50 sidebar-transition transform lg:transform-none -translate-x-full lg:translate-x-0 shadow-xl">
  <div class="flex flex-col h-full">

    <!-- Logo/Brand -->
    <div class="flex items-center justify-center h-16 bg-gray-800 border-b border-gray-700">
      <h1 class="text-lg font-bold text-white">Admin Panel</h1>
    </div>

    <!-- Navigation -->
    <div class="flex-1 overflow-y-auto py-4">
      <!-- Dashboard -->
      <div class="mb-6">
        <a href="/admin/dashboard" class="nav-item flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-800">
          <i data-lucide="home" class="w-4 h-4"></i>
          <span>Admin Dashboard</span>
        </a>
      </div>

      <!-- Users Section -->
      <div class="mb-6">
        <div class="px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">
          User Management
        </div>
        <div class="space-y-1">
          <a href="/admin/users" class="nav-item flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-800">
            <i data-lucide="users" class="w-4 h-4"></i>
            <span>Users</span>
          </a>
        </div>
      </div>

      <!-- Content Management Section -->
      <div class="mb-6">
        <div class="px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">
          Content Management
        </div>
        <div class="space-y-1">
          <a href="/admin/housing" class="nav-item flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-800">
            <i data-lucide="home" class="w-4 h-4"></i>
            <span>Housing Posts</span>
          </a>
          <a href="/admin/roommates" class="nav-item flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-800">
            <i data-lucide="user-plus" class="w-4 h-4"></i>
            <span>Roommate Posts</span>
          </a>
          <a href="/admin/activities" class="nav-item flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-800">
            <i data-lucide="calendar" class="w-4 h-4"></i>
            <span>Activity Posts</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Logout -->
    <div class="border-t border-gray-700 p-4">
      <button onclick="handleLogout()" class="flex items-center space-x-3 px-2 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded w-full text-left">
        <i data-lucide="log-out" class="w-4 h-4"></i>
        <span>Logout</span>
      </button>
    </div>
  </div>
</div>

<script>
  // Handle logout
  async function handleLogout() {
    try {
      await logout();
    } catch (error) {
      console.error('Logout failed:', error);
      // Fallback: clear localStorage and redirect anyway
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.href = '/login';
    }
  }

  // Initialize Lucide icons
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
</script>
